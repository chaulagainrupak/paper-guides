<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="{{ url_for('static', filename='admin.js') }}"></script>
    <title>Admin Panel</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        background-color: #f5f5f5;
        padding: 20px;
      }
      .card {
        border: 1px solid #ddd;
        padding: 20px;
        margin: 15px 0;
        border-radius: 8px;
        background-color: #f8f9fa;
      }
      .rating-editor {
        display: none; /* Initially hidden */
        margin-top: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .rating-editor select {
        padding: 5px;
        font-size: 16px;
        border-radius: 4px;
      }
      .rating-editor button {
        padding: 8px 16px;
        font-size: 14px;
        border: none;
        border-radius: 4px;
        background-color: #2196f3;
        color: white;
        cursor: pointer;
      }
      .rating-editor button:hover {
        opacity: 0.9;
      }
      .edit-rating-btn {
        margin-top: 10px;
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        background-color: #2196f3;
        color: white;
        cursor: pointer;
      }
      .edit-rating-btn:hover {
        opacity: 0.9;
      }
    </style>
  </head>
  <body>
    <button class="button" onclick="history.back()" style="background-color: #f44336; color: white;">
      Back to Dashboard
    </button>

    <div class="card">
      <h1>Question Details</h1>
      <h2><strong>Subject:</strong> {{ question.subject }}</h2>
      <h2><strong>Topic:</strong> {{ question.topic }}</h2>
      <h2><strong>Difficulty:</strong> {{ question.difficulty }}/5</h2>
      <h2><strong>Rating:</strong> <span id="current-rating">{{ question.rating }}/5</span></h2>

<!-- Edit Rating Button -->
<button
  class="edit-rating-btn"
  onclick="toggleRatingEditor()"
>
  ✏️ Edit Rating
</button>

<!-- Rating Editor -->
<div id="rating-editor" class="rating-editor">
  <form
    id="rating-form"
    action="/admin/{{ question.uuid }}/{{ question.rating }}"
    method="POST"
  >
    <label for="rating-select">New Rating:</label>
    <select id="rating-select" name="rating">
      <option value="1" {% if question.rating == 1 %}selected{% endif %}>1</option>
      <option value="2" {% if question.rating == 2 %}selected{% endif %}>2</option>
      <option value="3" {% if question.rating == 3 %}selected{% endif %}>3</option>
      <option value="4" {% if question.rating == 4 %}selected{% endif %}>4</option>
      <option value="5" {% if question.rating == 5 %}selected{% endif %}>5</option>
    </select>
    <button type="submit">Submit</button>
  </form>
</div>


      <div class="actions">
        <button
          onclick="deleteItem('question', '{{ question.uuid }}')"
          class="button delete"
        >
          Delete
        </button>
      </div>
    </div>

    <script>
      // JavaScript to toggle the visibility of the rating editor
      function toggleRatingEditor() {
        const editor = document.getElementById('rating-editor');
        const isHidden = editor.style.display === 'none' || editor.style.display === '';
        editor.style.display = isHidden ? 'flex' : 'none';
      }
    </script>
  </body>
</html>
